# Vim学习笔记

之前看身边的朋友玩vim很帅耶,顺便也找点工作中的乐子,就开始玩起来vim,是否真用得上不敢说,但每天都有进步的感觉很好呀,再说日后难免用远程机器搞点什么,多学一门手艺总不是缺点

<!--more-->

## 基本操作

第一步首先是学光标移动命令,单纯的`hjkl`记起来不难,真正困难的是熟练,一想到左第一反映还是按j,毕竟是习惯食指放在上面了,这个就改呀改也改不过来,到今天大约得有个2个月了,还有时候会按错.

基本的上下左右了解到以后下一步是研究翻页,大片的代码在没有了滚轮的情况下,一行一行的移动可受不了,之后首先记的就是`Ctrl+d`,`Ctrl+u`的半屏翻转,整屏翻转倒是用的不算多,大范围的移动一般就靠查找来解决了,另外还有`w`和`b`来逐个单词的移动光标

说到查找,之前对vim的查找就只知道`/`这个东西,还只会找一次打一次,现在知道了原来按`n`和`N`可以前后继续查找下一个,着就方便许多啦,另外还有个`f`和`F`在本行内快速定位到某个单词

    var r = function(x, y, z){}

例如上面这行,如果我的光标停留在r的位置,想快速定位到y,就可以按`fy`,就会立刻定位到第一个y的位置啦,如果一行中有多个同样的字母,可以通过`2fn`的方式定位到比如第二个n字母位置,另外vim中有很多类似`<n><command>`的命令结构,下面会提到,整行移动光标还可以使用`<n>+`,`<n>-`的方式移动,说到这要强力推荐一个设置(vim的配置是个巨大无比的深坑,其他的后面再说),`set rnu`,可以让行号变成相对行号,非常有利于vim的各种命令

    2    function fun(){
    1       alert(1);
    0       alert(2);
    1       alert(3);
    2    }
    
比如我的光标停留在`alert(2)`这一行,如果设置了`rnu`就会像上面一样显示,这时候我想移动到`function`这行,就可以使用`2-`的方式,数字很直观,不然行数多了,去数我要移动到多少行之外岂不是太没效率了

现在会定位了,接下来就开始一些编辑操作,最长用的`i`,`a`用来转换基本的输入模式,一个是在光标前插入,另一个用于在后面add,新增一行也不需要到行尾再按回车,直接用`o`,`O`的方式就可以分别在当前行下方或上方插入一行,并转入输入模式

说完了增,就该删了,可以用`dd`或者`<n>dd`的方式从当前行删除1行或多行,删除的脏数据会被保存在buf中,随便找个地方,用`p`就可以粘贴到光标位置,这个也就可以用来实现简单的剪切功能,另外vim可以没有`ctrl+z`,操作错误了需要按`u`来回撤,我猜是undo的意思吧,还有贴心的按单词删除命令`dw`从当前位置删除到单词结束, `db`向前删除.

改的话比较多样,之前对于单个拼写错误的字母,会使用`x`删除掉当前字幕,随后按`a`在光标后插入并继续输入,后来找到了更好的方法是用`r`可以直接输入一个字母来替换当前位置的字母,还有`R`可以一直输入并覆盖当前位置的字母直到按下esc

接下来说几个很方便但不常用的功能,比如我们想要注释一大段代码,常用的编辑器的话,可以用鼠标选中这些行,按个快捷键就都注释掉了,在vim下可以通过竖行选中的方式来编辑,先按`control+v`的方式进入列选择(visual)状态(`shift+v`可以整行选择),然后按上下键就可以选择不同行的固定位置啦,选好之后可以按`shift+i`的方式进入插入状态,打个`//`,esc就可以看到所有选中位置前都插入啦,visual状态的操作非常多,回头慢慢研究

vim还有一大功能就是tab的使用,不要以为命令行就不能处理多文件了,插件先不提,基本功能中使用`tabe <file>`在新tab中打开文件,直接按`gt`和`gT`在tab之间切换,

## 一点点小规律
说一下vim快捷键中的规律,一开始总发愁这么多乱七八糟的怎么记,开始尝试之后会发现还是有很多规律

* `b`常用来表示向前,比如`db`向前删除,`b`向前移动光标
* `w`则正相反,用来表示向后,`dw`之类的
* 大写和小写经常是一对相反的操作,例如`/`查找后的`f`和`F`,`o`和`O`的向前插入行和向后插入行

## 插件和配置

到最后不得不说vim的配置和插件太nb了,玩的最后意思,这个话题比较大单独有时间再说吧

所有的个人配置项都保存在`~/.vimrc`目录下,我从这个文件完全没有,到现在也有几十行了,据说有的高手这个配置可以到上百行,这其实就是另一种编程乐趣了
我目前简单装了几个

* `nerdtree`用于浏览文件和目录树,也可以很方便的以各种姿势打开文件
* `neocomplcache`可以用于智能补全,可以提示出各种内置库函数,文件路径和文件内出现过的变量,单词什么的,非常强大

另外还有强大的`autocmd`和`nmap`之流,前者用于自动执行命令,后者可以自己发明各种快捷键,这些玩意绝对够玩很久.

不过就是vim的学习曲线陡峭无比,开始使用时各种操作不顺手,看着屏幕和键盘发呆,不知道该怎么操作,到现在略有好转,但是很多操作还需要停下来想,不够连贯,目前在慢慢强迫自己熟练操作,减少直接去按上下左右的次数.


